# 👻 Don-tBe-iOS 

## ✨ 프로젝트 소개
### 비난·차별·혐오 표현의 글을 투명하게, 우리가 함께 만들어가는 온화한 익명 커뮤니티 Don’t be

<br>

## 🍎 iOS Developers
| 👑 변희주 | 변상우 | 김연수 |
| :--------: | :--------: | :--------: |
| <img src="https://github.com/TeamDon-tBe/Don-tBe-iOS/assets/97782228/bbed44fe-eed0-4b8c-a249-fad0970515b6" width="230px"/> | <img src="https://github.com/TeamDon-tBe/Don-tBe-iOS/assets/97782228/142e1c53-3f15-4497-be7e-3af3ae702cf5" width="230px"/> | <img src="https://github.com/TeamDon-tBe/Don-tBe-iOS/assets/97782228/06d74614-17de-4517-b185-5c26b6fb7edf" width="230px"/> |
|[Heyjoo](https://github.com/Heyjooo)|[boogios](https://github.com/boogios)|[yeonsu0-0](https://github.com/yeonsu0-0)|
| 온보딩, 알림 | 글쓰기, 마이페이지 |   홈   |
| 따뜻한 익명의 공간을 <br>만들어나가요 ❤️‍🔥 | 온화한 커뮤니티?<br>긍정의 힘으로 만들어주지 😎 | 오늘은 어떤 코드를 짜볼까 ~ |

<br>

## 🔄 Architecture Pattern
### MVVM Pattern
<img width="685" alt="스크린샷 2024-01-07 오전 12 40 16" src="https://github.com/TeamDon-tBe/Don-tBe-iOS/assets/97782228/e990804a-6e1d-4b38-bfd6-c5710d12b7cb">

<br>

## ✅ Coding Convention
Don't be Coding Convention  ➡️ 
🔗https://joyous-ghost-8c7.notion.site/Coding-Convention-fe51e7ac0d624b6f9653087e20e2c4b5?pvs=4

<br>

## 🧬 Git branch 전략
~~~ 
1️. 처음에는 main branch와 main에서부터 시작된 develop branch가 존재합니다.
2️. 새로운 작업이 있는 경우 develop branch에서 feature branch를 생성합니다. 
   feature branch는 언제나 develop branch에서부터 시작하게 됩니다. 
   기능 추가 작업이 완료되었다면 feature branch는 develop 브랜치로 merge 됩니다. 
3️. 수정 사항이 생기면 develop branch에서 fix branch를 생성합니다. 
   fix branch도 마찬가지로 develop branch에서부터 시작하게 됩니다. 
   수정이 완료되었다면 fix branch는 develop 브랜치로 merge 됩니다. 
4️. develop에 이번 버전에 포함되는 모든 기능이 merge 되었다면 QA를 하기 위해 develop branch에서 release branch를 생성합니다. 
   QA를 진행하면서 발생한 버그들은 release branch에서 수정됩니다. 
   QA를 무사히 통과했다면 release branch를 main과 develop branch로 merge 합니다.
5️. 마지막으로 출시된 main 브랜치에서 버전 태그를 추가합니다.
~~~

<br>

## 📁 Project Foldering Convention
~~~
├── Application
│   ├── AppDelegate
│   ├── SceneDelegate
├── Global
│   ├── Extension
│   ├── Protocol
│   ├── Literals
│   │   ├── ImageLiterals
│   │   ├── StringLiterals
│   ├── Resources
│   │   ├── Info.plist
│   │   ├── Font
│   │   ├── Assets
├── Network
│   ├── Foundation
│   |   ├── Config
|   |   ├── NetworkError
│   ├── Scene1(이름)
│   |   ├── DTO
|   |   ├── Service
├── Presentation
│   ├── Helpers
│   ├── Scene1(이름)
│   │   ├── Views
│   │   ├── ViewControllers
│   │   ├── ViewModels
│   │   ├── Cells
│   │   │   ├── Cell1
│   │   │   ├── Cell2
│   ├── Example
│   │   ├── ExampleView
│   │   ├── ExampleViewController
├───├───├── ExampleCollectionViewCell
~~~

## 📚 Library
~~~
1. SnapKit
    - Auto Layout을 보다 간결하게 작성할 수 있게 해주는 라이브러리
2. KakaoOpenSDK
    - 카카오 플랫폼과의 통합을 위한 개발 도구를 제공하는 라이브러리
~~~

<br>

## 🔎 뷰에 대한 설명 및 개발한 기능에 대한 설명
### 희주
| 뷰 | 핵심 기능 | 화면 가동 영상 | 뷰 설명 |
| --- | --- | --- | --- |
| 소셜로그인 | 유저에게 소셜로그인 기능을 제공 |  | 카카오 로그인을 연결시켜 유저가 카카오로 로그인할 수 있도록 합니다. 처음 로그인하는 유저일 경우 회원가입 화면으로 넘어가고 이미 회원가입을 한 유저라면 온보딩 뷰로 넘어갑니다. |
| 회원가입 | 유저에게 서비스 약관동의 및 회원가입 기능을 제공 |  | 1. 약관동의뷰에서는 4개의 약관동의 중 필수 항목 3개를 동의해야 넘아갈 수 있습니다. 동일한 UI가 반복되므로 커스텀 뷰를 만들어 전체선택을 포함하여 5번 재사용했습니다. 전체선택을 클릭할 경우 모든 약관을 동의할 수 있고 다시 클릭할 경우 전체선택이 해제됩니다. 또한 더보기 버튼을 누르면 각 약관설명에 해당하는 상세뷰 (웹뷰)로 이동합니다. 2. 닉네임 작성하기 뷰에서는 앱에서 사용할 닉네임을 작성합니다. 닉네임은 12자로 제한하며 한글(자음,모음), 영어, 숫자, 특수문자 중 _ 만 허용합니다. 또한 이미 있는 닉네임인지 확인하기 위해 서버에 중복 확인을 요청하고 중복되지 않은 경우에만 회원가입이 가능합니다. 닉네임은 추후 프로필 편집에서 수정할 수 있습니다. |
| 온보딩 | 유저에게 서비스 설명이 담긴 온보딩 화면 제공 및 한줄 소개 작성 기능 제공 |  | 1. 회원가입을 처음하는 유저에게는 서비스 설명을 유도하기 위해 온보딩에 건너뛰기 버튼이 존재하지 않고 이미 회원가입을 한 유저에게는 건너뛰기 버튼이 존재합니다. 건너뛰기 버튼을 누를 시에는 온보딩 마지막 화면인 한 줄 소개 작성하기 화면으로 이동합니다. 2. 한 줄 소개 작성하기 화면에서 한 줄 소개를 작성하고 시작하기 버튼을 누르면 홈 화면에 자동으로 게시글로 글이 올라가며 홈 화면으로 이동하고, 한 줄 소개 나중에 작성하기 버튼을 누르면 아무 동작 없이 홈 화면으로 이동합니다. 한 줄 소개를 작성할 때에는 50자 이하로 작성해야하며 공백인 상태로는 시작하기 버튼을 누를 수 없습니다. |
| 알림 조회 | 유저에게 8개 타입(답글, 답글 좋아요, 게시글 좋아요, 게시글 투명도, 답글 투명도, 이용제한, 제한해제, 이용정지)의 알림 조회 기능 제공 |  | 1. 알림뷰는 tableView 로 구현하였으며 문장 수에 따라 셀의 높이를 다르게 하여 UI를 자연스럽게 구현하였습니다. 앱에 들어갔을 때 새로운 알림이 있으면 알림탭에 빨간 배지가 생기며 알림탭을 누르면 배지가 사라집니다. 알림 탭을 눌러 알림 화면에 들어가면 지금까지 받은 알림을 모두 조회할 수 있으며 알림은 총 8개의 타입입니다. 서버에서 받아오는 type으로 알림종류를 구분하고 받아오는 type을 변환하여 텍스트로 나타냅니다. 2. 알림 종류 중 답글, 답글 좋아요, 게시글 좋아요, 게시글 투명도, 답글 투명도에 해당하는 알림을 클릭하면 해당 게시글 상세페이지로 이동하며 이용제한 해제 알림을 클릭하면 글쓰기 페이지로 이동합니다. 또한 이용제한 알림을 클릭하면 마이페이지로 이동하며 이용정지 알림을 클릭하면 별도의 페이지 이동이 없습니다. |

### 상우
| 뷰 | 핵심 기능 | 화면 가동 영상 | 뷰 설명 |
| --- | --- | --- | --- |
| 글쓰기 | 유저에게 글쓰기 기능 제공 |  | 1. 텍스트 제한 수에 따른 원형 프로그레스 바 구현 텍스트 수에 따라 원형 프로그레스 바가 점점 차오르는 애니메이션 기능을 중점적으로 구현했습니다. 500자 제한으로 500자가 넘어가는 경우 빨간색 프로그레스 바로 바뀜과 동시에 햅틱 기능으로 유저에게 알려주었습니다. 2. 게시 완료 토스트 메시지 커스텀 게시 버튼 클릭 시, 홈으로 이동하며 새롭게 작성한 글을 볼 수 있도록 구현했습니다. 업로드 중임을 알려주기 위한 토스트 메시지를 다른 화면에서도 사용 가능하도록 커스텀 구현하는 것을 중점적으로 구현했습니다. |
| 마이페이지 | 유저에게 해당 유저의 기본 정보 기능 제공 해당 유저가 작성한 게시글, 답글 조회 기능 제공 프로필 편집, 계정 정보 기능 제공 |  | 1. 유저 프로필 기본 정보 조회 유저의 기본 정보(사진, 닉네임, 한 줄 소개, 투명도)를 서버에서 받아와서 보여주고 투명도 값에 따라 프로그레스 바 위치를 조절하는 것을 중점적으로 구현했습니다. 유저의 투명도 값에 따라 위치가 달라지는 프로그레스 바에 애니메이션을 줌으로써, 핵심 기능인 투명도에 좀 더 집중이 될 수 있도록 구현했습니다. 2. 해당 유저가 작성한 게시글, 답글 조회 서버에서 받아온 memberId에 따라서 내 프로필 화면, 다른 유저 프로필 화면으로 분기 처리를 진행하여 다르게 보이도록 하는데에 중점적으로 구현했습니다. 하나의 뷰를 재사용 할 수 있도록 구현하여 계속해서 다른 사람의 프로필로 이동할 수 있도록 구현했습니다. 해당 화면을 구현하면서 어려웠던 부분은 세로 스크롤 2개와 가로 스크롤 1개가 중첩되어 있는 화면이고 위로 스크롤을 하면 상단에 고정시키는 뷰입니다. 전체 스크롤 뷰의 yOffset 값에 따라 스크롤 활성화/비활성화 시키는 방식으로 구현을 완료 했고 관련 내용은 트러블 슈팅에 좀 더 자세하게 적었습니다! 3. 프로필 편집, 계정 정보 조회 닉네임, 한 줄 소개를 수정할 수 있고 나의 추가적인 정보와 앱의 정보에 대해서 서버에서 받아와 TableView를 활용해 보여주었습니다. |
| 투명도 적용 | 다른 유저의 투명도를 낮출 수 있는 투명도 기능 제공 |  | 1. 다른 유저에게 투명도 주기 기능 게시글이나 답글에 있는 투명도 버튼을 클릭하면 해당 유저의 투명도를 전체 투명도 -100~0 에서 -1을 시킬 수 있고, 내가 투명도 주기를 누른 유저는 아주 안 보이도록 분기 처리를 중점적으로 구현했습니다. CollectionView Cell 마다 존재하는 값에 따라서 내가 투명도를 누른 유저인지, 작성한 유저의 투명도 값에 따라 셀마다 다르게 보이도록 구현했습니다. 투명도 버튼을 클릭하면 해당 게시글 또는 답글에 투명도 적용이 바로 업데이트 됩니다. |

### 연수
| 뷰 | 핵심 기능 | 화면 가동 영상 | 뷰 설명 |
| --- | --- | --- | --- |
| 홈(메인) | - 유저에게 전체 게시글 콘텐츠 제공 - 케밥 버튼을 눌렀을 때 본인일 경우 삭제, 타 유저일 경우 신고 기능 - 좋아요 및 투명도 적용 기능 |  | 1️⃣ 전체 게시글 보기 홈 뷰에서는 전체 게시글을 최신순으로 확인할 수 있습니다. 전체 게시글이 늘어날 때마다 아래로 스크롤 하면서 모든 게시글을 확인할 수 있습니다. 2️⃣ 새로고침 게시글, 댓글 변동 시 홈 뷰가 자동으로 새로고침이 되는 것을 중점적으로 구현했습니다. 게시글을 새로 작성하는 경우에 자동으로 홈 뷰가 새로고침이 되도록 구현했고, 화면을 아래로 당기면 새로고침 되면서 새로운 게시글이 있다면 불러올 수 있도록 했습니다. refreshControl을 사용하여 호출 시점을 여러번 테스트하면서 뷰가 새로고침이 되도록 했습니다. 3️⃣ 버튼 액션 구현 케밥 버튼을 누르는 경우 본인일 때는 삭제하기, 타유저일 때는 신고하기 바텀 시트가 나오도록 팝업 뷰를 분기처리 했습니다. 좋아요 버튼을 toggle로 구현하여 좋아요를 눌렀다가 취소했다가 할 수 있는 기능을 구현했습니다.  유저에 따른 분기 처리와 버튼을 눌렀을 때 나오는 팝업창이 많아 구현에 어려움을 겪었으나, Notification Center를 이용해서 다른 버튼을 눌렀을 때 이전 뷰가 pop 될 수 있도록 했습니다. Notification Center로 이전 뷰를 팝업하는 노티를 바로 주는 것이 좋아 많은 뷰에서 활용을 했는데, 사용 후 viewWillDisappear에서 Observer를 해제하는 것을 뒤늦게 알아서 QA 때 자잘한 오류들이 발생하는 것을 알 수 있었습니다. |
| 게시글 상세 | - 유저 정보, 게시 관련 정보, 컨텐츠 내용 정보 제공 - 게시글에 해당하는 답글 보기  |  | 1️⃣ 게시글 및 답글 보기 홈 뷰에서 한 게시글을 터치하면 게시글 상세 페이지를 볼 수 있습니다. 게시글 상세 페이지에서는 기존 홈 뷰에서 볼 수 있는 유저 정보, 게시 및 컨텐츠 내용을 확인할 수 있고, 해당 게시글에 달린 답글을 확인하거나 작성할 수 있습니다. 2️⃣ 레이아웃🤯 기존 게시글과 그 아래에 답글 리스트를 구현했습니다. 새로운 답글을 작성하면 뷰가 자동으로 새로고침 되면서 작성한 답글이 바로 보이도록 했습니다. 레이아웃을 짜는 게 복잡해서 처음 짠 레이아웃에서 수정하는 과정을 여러번 거치면서 완성했습니다. 기존 게시글 뷰는 collectionView header에 넣고, 답글 컨텐츠는 collectionView에 넣어서 전체 뷰가 스크롤 될 수 있도록 구현했습니다. | 
| 게시글 답글 작성 | - 기존 게시글 정보 제공 - 답글 작성 및 게시 기능 |  | 1️⃣ 게시글 답글 작성 게시글 상세 뷰에서 답글 작성하기 텍스트 필드 영역을 누르면 답글을 작성할 수 있습니다. 작성한 답글은 최신순으로 뷰에 업데이트 됩니다. 2️⃣ 바텀 시트 답글 작성 버튼을 누르면 바텀 시트로 작성할 수 있는 뷰가 나타나도록 했습니다. 기본으로 제공하는 바텀 시트 뷰와 다양한 속성들을 활용하여 뷰를 구현했습니다. 게시 후 바텀 시트가 사라지며 기존 게시글 상세 뷰가 업데이트 됩니다. |
